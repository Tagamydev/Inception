services:
 nginx:
  build: ./requirements/nginx/
  depends_on:
   - base_img
   - wordpress
  ports: 
   - "443:443"
  networks:
   - inc_net
  volumes:
   - "wordpress_vol:/var/www/html/"
  restart: on-failure
  env_file:
   - .env

 mariadb:
  build: ./requirements/mariadb/
  depends_on:
   - base_img
  networks:
   - inc_net
  restart: on-failure
  env_file:
   - .env

 wordpress:
  build: ./requirements/wordpress/
  depends_on:
   - base_img
  networks:
   - inc_net
  volumes:
   - "wordpress_vol:/var/www/html/"
  restart: on-failure
  env_file:
   - .env

 base_img:
  build: ./requirements/tools/

volumes:
 wordpress_vol:
  driver: local
  driver_opts:
   type: none
   device: /home/samusanc/data/wordpress
   o: bind

 data_base_vol:
  driver: local
  driver_opts:
   type: none
   device: /home/samusanc/data/db
   o: bind

networks:
 inc_net:
